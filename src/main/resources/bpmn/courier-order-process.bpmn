<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_12lhpya" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.35.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.23.0">
  <bpmn:process id="courier-order-process" name="Courier Order Process" isExecutable="true">
    <bpmn:startEvent id="StartEvent_CourierReady" name="Courier Is Ready">
      <bpmn:outgoing>Flow_18nm88u</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_AssignOrder" name="Assign Order" camunda:delegateExpression="${assignOrderToCourierDelegate}">
      <bpmn:incoming>Flow_18nm88u</bpmn:incoming>
      <bpmn:incoming>Flow_0nh4r71</bpmn:incoming>
      <bpmn:outgoing>Flow_1qrwtuq</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_18nm88u" sourceRef="StartEvent_CourierReady" targetRef="Activity_AssignOrder" />
    <bpmn:exclusiveGateway id="Gateway_OrderAssigned" name="Order Assigned?">
      <bpmn:incoming>Flow_1qrwtuq</bpmn:incoming>
      <bpmn:outgoing>Flow_Assigned</bpmn:outgoing>
      <bpmn:outgoing>Flow_NotAssigned</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1qrwtuq" sourceRef="Activity_AssignOrder" targetRef="Gateway_OrderAssigned" />
    <bpmn:sequenceFlow id="Flow_Assigned" name="Assigned" sourceRef="Gateway_OrderAssigned" targetRef="Activity_CourierDeliverOrder">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${orderId != null}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_NotAssigned" name="Not Assigned" sourceRef="Gateway_OrderAssigned" targetRef="Event_Wait10Min">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${orderId == null}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:intermediateCatchEvent id="Event_Wait10Min" name="Wait 10 Min">
      <bpmn:incoming>Flow_NotAssigned</bpmn:incoming>
      <bpmn:outgoing>Flow_0nh4r71</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_05iyunc">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P10M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0nh4r71" sourceRef="Event_Wait10Min" targetRef="Activity_AssignOrder" />
    <bpmn:userTask id="Activity_CourierDeliverOrder" name="Courier Deliver Order" camunda:assignee="${courierId}">
      <bpmn:documentation>You need to deliver order ${orderId}.</bpmn:documentation>
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="orderId" label="Order ID" type="long" defaultValue="${orderId}">
            <camunda:validation>
              <camunda:constraint name="readonly" config="true" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Assigned</bpmn:incoming>
      <bpmn:outgoing>Flow_1dly7py</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1dly7py" sourceRef="Activity_CourierDeliverOrder" targetRef="Activity_CloseOrder" />
    <bpmn:endEvent id="Event_OrderClosed" name="Order Closed">
      <bpmn:incoming>Flow_0xjvz55</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0xjvz55" sourceRef="Activity_CloseOrder" targetRef="Event_OrderClosed" />
    <bpmn:serviceTask id="Activity_CloseOrder" name="Close Order" camunda:delegateExpression="${closeOrderDelegate}">
      <bpmn:incoming>Flow_1dly7py</bpmn:incoming>
      <bpmn:outgoing>Flow_0xjvz55</bpmn:outgoing>
    </bpmn:serviceTask>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="courier-order-process">
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_CourierReady">
        <dc:Bounds x="182" y="82" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="161" y="125" width="83" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_151jyxl_di" bpmnElement="Gateway_OrderAssigned" isMarkerVisible="true">
        <dc:Bounds x="465" y="75" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="450" y="51" width="83" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1n9alhu_di" bpmnElement="Activity_AssignOrder">
        <dc:Bounds x="300" y="60" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ky9uw5_di" bpmnElement="Activity_CourierDeliverOrder">
        <dc:Bounds x="620" y="60" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lmio8a_di" bpmnElement="Event_Wait10Min">
        <dc:Bounds x="402" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="391" y="188" width="58" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1o7ccob_di" bpmnElement="Event_OrderClosed">
        <dc:Bounds x="962" y="82" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="947" y="125" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0vytace_di" bpmnElement="Activity_CloseOrder">
        <dc:Bounds x="790" y="60" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_18nm88u_di" bpmnElement="Flow_18nm88u">
        <di:waypoint x="218" y="100" />
        <di:waypoint x="300" y="100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qrwtuq_di" bpmnElement="Flow_1qrwtuq">
        <di:waypoint x="400" y="100" />
        <di:waypoint x="465" y="100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yahde5_di" bpmnElement="Flow_Assigned">
        <di:waypoint x="515" y="100" />
        <di:waypoint x="620" y="100" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="546" y="82" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kdznbx_di" bpmnElement="Flow_NotAssigned">
        <di:waypoint x="490" y="125" />
        <di:waypoint x="490" y="230" />
        <di:waypoint x="438" y="230" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="497" y="143" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nh4r71_di" bpmnElement="Flow_0nh4r71">
        <di:waypoint x="402" y="230" />
        <di:waypoint x="350" y="230" />
        <di:waypoint x="350" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1dly7py_di" bpmnElement="Flow_1dly7py">
        <di:waypoint x="720" y="100" />
        <di:waypoint x="790" y="100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xjvz55_di" bpmnElement="Flow_0xjvz55">
        <di:waypoint x="890" y="100" />
        <di:waypoint x="962" y="100" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
